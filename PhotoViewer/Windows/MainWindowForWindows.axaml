<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:PhotoViewer.Views"
        xmlns:windows="clr-namespace:PhotoViewer.Windows"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="PhotoViewer.Windows.MainWindowForWindows"
        x:DataType="windows:MainWindowForWindows"
        Icon="/Assets/icon.ico"
        Title="PhotoViewer 图片查看器"
        SystemDecorations="None"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="-1"
        TransparencyLevelHint="Mica, AcrylicBlur, Blur, Transparent"
        Background="Transparent">
    
    <Window.Styles>
        <!-- 标题栏按钮样式 -->
        <Style Selector="Button.TitleBtn">
            <Setter Property="FontFamily" Value="{StaticResource UiconsFontRegularRounded}" />
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Margin" Value="4,8,4,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </Window.Styles>

    <Grid>
        <!-- 原主内容 -->
        <views:MainView Name="RootMainView" />

        <!-- 左侧标题栏覆盖区：用于拖拽与标题文本（中间留空，不覆盖筛选栏） -->
        <Border Name="LeftTitleBar"
                Height="48"
                VerticalAlignment="Top"
                HorizontalAlignment="Left"
                Opacity="0"
                Background="#6111"
                PointerPressed="TitleBar_PointerPressed">
            <Grid Margin="8,0,4,0">
                <TextBlock Text="{Binding Title, FallbackValue=PhotoViewer 图片查看器}"
                           VerticalAlignment="Center"
                           Foreground="White"
                           Opacity="0.85"
                           Margin="4,0,0,0"/>
            </Grid>
        </Border>

        <!-- 右侧标题栏覆盖区：扩展至中间空隙右侧全部区域；区域内与按钮上都可拖拽 -->
        <Border Name="RightTitleBar"
                Height="48"
                VerticalAlignment="Top"
                HorizontalAlignment="Right"
                Opacity="0"
                Background="Transparent"
                PointerPressed="TitleBar_PointerPressed">
            <StackPanel Name="RightButtonsHost"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,0,4,0"
                        PointerPressed="TitleBar_PointerPressed">
                <!-- 最小化 -->
                <Button Name="BtnMin" Classes="TitleBtn" Content="&#xf94e;"
                        Click="BtnMin_Click" ToolTip.Tip="最小化"/>
                <!-- 最大化 / 还原 -->
                <Button Name="BtnMax" Classes="TitleBtn" Content="&#xfcd4;"
                        Click="BtnMax_Click" ToolTip.Tip="最大化"/>
                <!-- 全屏 / 退出全屏 -->
                <Button Name="BtnFull" Classes="TitleBtn" Content="&#xf5ef;"
                        Click="BtnFull_Click" ToolTip.Tip="全屏"/>
                <!-- 关闭 -->
                <Button Name="BtnClose" Classes="TitleBtn" Content="&#xf4f7;"
                        Click="BtnClose_Click" ToolTip.Tip="关闭">
                    <Button.Styles>
                        <Style Selector="Button:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="#E81123"/>
                        </Style>
                    </Button.Styles>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</Window>
